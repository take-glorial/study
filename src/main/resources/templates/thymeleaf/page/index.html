<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="thymeleaf/layout/main">

<!--
page Css
<th:block layout:fragment="pageCss">
	<link rel="stylesheet" th:href="@{/css/page/home.css}">
</th:block>
-->

<!-- page 스크립트 -->
<th:block layout:fragment="pageScript">
	<script type="text/javascript">
		$(document).ready(function () {

			$("#btnAjax").on("click",function(){
				const mainDTO = {
					searchText : "테스트입니다."
				}

				$.ajax({
			        url : "/ajaxTest",
			        data : JSON.stringify(mainDTO),
			        type :"post",
			        contentType : "application/json",
			        dataType :'json',
			        cache : false
				}).done(function(fragment){
			    	$("#boardList").replaceWith(fragment);
			    }).fail(function(err){
			    	console.log('error', err);
			    });
			});

			$("#btnForm").on("click",function(){
				const mainDTO = {
					searchText : "테스트입니다."
				}

				const queryString = Object.keys(mainDTO)
										    .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(mainDTO[key])}`)
										    .join('&');

				$.ajax({
			        url: "/formTest",
			        data : queryString,
			        type:"post",
				}).done(function(fragment){
			    	$("#boardList").replaceWith(fragment);
			    }).fail(function(err){
			    	console.log('error', err);
			    });
			});

		});
	</script>
</th:block>

<main layout:fragment="page" role="main" class="flex-shrink-0">
	<div class="container">
	    <h1 class="mt-5">업무화면</h1>
	    <p class="lead">어쩌고 저쩌고</p>

		<input value="ajaxTest" type="button" id="btnAjax" >
		<input value="formTest" type="button" id="btnForm" >

	    <div id="boardList">
	    	<th:block th:if="${ mainDTO != null }">
		    	<span th:text="${ mainDTO.searchText }">보드테스트</span>
		    </th:block>
	    </div>
	  </div>
</main>

</html>